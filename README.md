Nomad-Market — MVP маркетплейса (React + Node.js + Express + PostgreSQL)

Описание
Nomad-Market — прототип маркетплейса по типу OLX с имитацией блокчейна Solana: кошелёк, токенизация объявлений, покупки с псевдо-хэшами транзакций, уведомления. Есть админ-панель для модерации.

Стек
- Frontend: React (CRA), React Router, Axios, Tailwind (CDN)
- Backend: Node.js, Express, pg (без ORM), multer, JWT, bcrypt
- DB: PostgreSQL

Запуск проекта (локально)
1) Требования
- Node.js 18+
- PostgreSQL 14+

2) Настройка базы
- Создайте БД nomad_market (или укажите своё имя в .env)

3) Backend — .env
Создайте файл backend/.env по примеру:

PORT=4000
CLIENT_ORIGIN=http://localhost:3000
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=nomad_market
JWT_SECRET=change_me_secret


Установка и запуск backend:
cd backend
npm install
npm start

При первом запуске сервер создаст необходимые таблицы. API: http://localhost:4000

4) Frontend — .env
Создайте файл frontend/.env по примеру:

REACT_APP_API_URL=http://localhost:4000

Установка и запуск frontend:
cd frontend
npm install
npm start

Откройте http://localhost:3000

Учётные записи
- Администратор: создаётся автоматически при первом запуске.
  - Email: admin@nomad-market.local
  - Пароль: Admin123!
  - Сразу входите через страницу /auth и попадёте в админ-панель (кнопка «Админ» появится в верхнем меню).
- Обычный пользователь: регистрируется через страницу /auth.

Роли и доступ
- Пользователь: создавать/просматривать объявления, покупать, изменять профиль, кошелёк и историю транзакций.
- Администратор: доступ к /admin (в UI — кнопка «Админ» у админ-аккаунта)
  - Просмотр и удаление любых объявлений с указанием причины (уведомление уходит автору)
  - Просмотр списка пользователей, их балансов и транзакций
  - Удаление пользователей (кроме админов)

Основные эндпоинты (Backend)
- POST /auth/register — регистрация { email, password, nickname }
- POST /auth/login — логин { email, password }
- GET /listings — список объявлений (q, minPrice, maxPrice, owner)
- POST /listings — создать объявление (multipart: image, title, description, price)
- POST /listings/:id/mint — создать токен (используется внутри, в UI скрыто)
- POST /purchase — покупка { listingId }
- GET /wallet/:id — кошелёк, токены, транзакции, уведомления (требует авторизацию)
- PUT /profile — изменить email/nickname/password
- GET /listings/:id/image — получить картинку объявления

Админ-эндпоинты
- GET /admin/listings — все объявления
- DELETE /admin/listings/:id?reason=... — удалить объявление и отправить уведомление автору
- GET /admin/users — все пользователи
- GET /admin/users/:id/transactions — транзакции пользователя
- DELETE /admin/users/:id — удалить пользователя

Политика пароля
- Минимум 8 символов, одна заглавная, одна строчная, цифра и символ. На фронте показаны подсказки/валидация.

UI
- Хедер с логотипом (SVG), кнопка «Маркет» рядом с основными действиями.
- Поиск и фильтры, карточки объявлений, модальные подтверждения и inline-уведомления.
- Кошелёк (mock Phantom), личный кабинет с токенами/транзакциями/уведомлениями.
- Админ-панель: страницы объявлений и пользователей.

Типовой сценарий
1) Зарегистрируйтесь (или админом по ADMIN_EMAIL).
2) Создайте объявление (название, описание, цена, фото).
3) Во втором аккаунте купите объявление — баланс спишется/зачислится, сменится владелец токена, появится транзакция и уведомление.

Замечания
- Для продакшена добавьте CORS-список доменов, храните изображения во внешнем объектном хранилище, используйте миграции.
- Демонстрационный проект. Не храните реальные ключи/секреты в коде.